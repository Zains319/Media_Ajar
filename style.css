/* ===== Root Variables ===== */
:root {
  --blue: #0a74d6;
  --blue-2: #0a6bdc;
  --muted: #6b85a3;
  --bg: #eef5ff;
  --card: #ffffff;
  --soft: #dfefff;
  --shadow: 0 8px 24px rgba(13,52,102,0.08);

  --dark-bg: #0d1a26;
  --dark-card: #13293d;
  --dark-text: #d7e9ff;
  --dark-soft: #17324c;
  font-family: Inter, Poppins, system-ui;
}

/* ===== Dark Mode ===== */
body.dark {
  background: var(--dark-bg);
  color: var(--dark-text);
}

body.dark .sidebar {
  background: var(--dark-card);
  border-right-color: #1e3a56;
}

body.dark .menu a {
  color: #9dd1ff;
}

body.dark .menu a.active {
  background: var(--blue);
  color: #fff;
}

body.dark .card-block,
body.dark .menu-card,
body.dark .hero,
body.dark .pos-card-small,
body.dark .card-face.front {
  background: var(--dark-card);
  color: var(--dark-text);
  border-color: #1f3d5c;
}

body.dark .card-face.back {
  background: linear-gradient(180deg, #0f4ea8, #0d3c7d);
}

/* ===== Reset ===== */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  background: var(--bg);
  color: #0b2b45;
  display: flex;
  flex-direction: column;
  min-height: 100vh;

  /* Panel slide animation */
  overflow-x: hidden;
}

/* ===== Sidebar ===== */
.sidebar {
  position: fixed;
  left: 0;
  top: 0;
  bottom: 0;
  width: 240px;
  background: var(--card);
  border-right: 1px solid #e6f0ff;
  padding: 28px 18px;
  box-shadow: 0 6px 20px rgba(10,20,40,0.03);
}

.logo {
  color: var(--blue);
  font-size: 1.8rem;
  font-weight: 700;
  margin-bottom: 18px;
}

/* Dark Mode Toggle Button */
.theme-toggle {
  background: var(--soft);
  border: none;
  padding: 10px 12px;
  border-radius: 10px;
  cursor: pointer;
  margin-bottom: 18px;
  font-size: 1.2rem;
  transition: 0.2s;
}

.theme-toggle:hover {
  background: var(--blue);
  color: #fff;
}

.menu a {
  display: block;
  padding: 10px 12px;
  border-radius: 10px;
  color: var(--blue-2);
  text-decoration: none;
  margin-bottom: 10px;
  font-weight: 600;
  cursor: pointer;
  transition: 0.2s;
}

.menu a:hover {
  background: var(--soft);
  transform: translateY(-3px);
}

.menu a.active {
  background: var(--blue);
  color: white;
  box-shadow: 0 6px 18px rgba(10,118,214,0.12);
}

/* ===== Main Area ===== */
.main {
  margin-left: 260px;
  padding: 28px;
  width: calc(100% - 260px);
  flex: 1;
}

/* Hero */
.hero {
  display: flex;
  gap: 20px;
  align-items: center;
  background: var(--card);
  padding: 22px;
  border-radius: 14px;
  border: 1px solid #e6f6ff;
  box-shadow: var(--shadow);
}

.hero-img {
  width: 320px;
  border-radius: 12px;
  object-fit: cover;
  border: 3px dashed var(--blue);
}

.hero-text h1 {
  color: var(--blue-2);
}

/* ===== Panels ===== */
.panel {
  display: none;
  margin-top: 20px;
  opacity: 0;
  transform: translateX(50px);
  transition: 0.35s ease;
}

.panel.show {
  display: block;
  opacity: 1;
  transform: translateX(0);
}

/* Section Title */
.section-title {
  color: var(--blue-2);
  margin-bottom: 8px;
  font-size: 1.25rem;
}

/* Deskripsi belakang flashcard — lebih jelas & kontras */
.desc {
  margin-top: 8px;
  font-size: 1rem;
  color: #ffffff;
  opacity: 0.95;
  text-align: center;
  line-height: 1.35;

  /* sedikit glow agar terbaca di background biru */
  text-shadow: 0 1px 3px rgba(0,0,0,0.25);
}


/* ===== Menu Cards ===== */
.menu-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 18px;
}

.menu-card {
  background: var(--card);
  padding: 18px;
  border-radius: 12px;
  border: 1px solid #e6f6ff;
  box-shadow: var(--shadow);
  cursor: pointer;
  transition: 0.2s;
}

.menu-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 14px 36px rgba(13,52,102,0.08);
}

/* ===== Card Block ===== */
.card-block {
  background: var(--card);
  padding: 16px;
  border-radius: 10px;
  margin-bottom: 12px;
  border: 1px solid #e8f5ff;
}

/* ===== Posisi Grid ===== */
.pos-grid {
  display: grid;
  grid-template-columns: repeat(5,1fr);
  gap: 10px;
}

.posBtn {
  padding: 10px;
  border-radius: 10px;
  border: none;
  background: linear-gradient(180deg,#e9f5ff,#dfefff);
  color: var(--blue-2);
  font-weight: 700;
  cursor: pointer;
  transition: 0.12s;
}

.posBtn:hover {
  transform: translateY(-3px);
}

/* ===== Pos Info Box ===== */
.pos-info {
  margin-top: 14px;
  display: flex;
  justify-content: center;
  animation: fadeIn 0.3s ease;
}

.pos-info.hidden {
  display: none;
}

/* Small 3D Card */
.pos-card-small {
  width: 260px;
  min-height: 180px;
  padding: 16px;
  background: var(--card);
  border-radius: 14px;
  border: 1px solid #e6f5ff;
  box-shadow: var(--shadow);

  position: relative;
  perspective: 1200px;
  cursor: pointer;
}

.pos-card-small .card-face {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 14px;
  padding: 16px;

  backface-visibility: hidden;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  transition: 0.6s;
}

.pos-card-small .front {
  background: #ffffff;
}

.pos-card-small .back {
  background: linear-gradient(180deg, #0a74d6, #0a6bdc);
  color: white;
  transform: rotateY(180deg);
}

.pos-card-small.flipped .front {
  transform: rotateY(-180deg);
}

.pos-card-small.flipped .back {
  transform: rotateY(0deg);
}

.jp { font-weight: 700; }
.indo { color: #e5f2ff; }

/* ===== Flashcards ===== */
.flash-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}

.card-3d {
  width: 270px;
  height: 330px;
  perspective: 1200px;
  position: relative;
}

.card-3d .card-face {
  width: 100%;
  height: 100%;
  border-radius: 14px;
  position: absolute;
  top:0;
  left:0;
  backface-visibility: hidden;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  transition: transform .6s;
}

.card-3d .front {
  background: white;
}

.card-3d .back {
  background: linear-gradient(180deg,#0a74d6,#0a6bdc);
  color:#fff;
  transform: rotateY(180deg);
}

.card-3d.flipped .front {
  transform: rotateY(-180deg);
}
.card-3d.flipped .back {
  transform: rotateY(0deg);
}

.flash-img {
  width: 100%;
  height: 180px;
  object-fit: cover;
}

.flash-controls {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.btn {
  padding: 10px 12px;
  border: none;
  background: #dfefff;
  border-radius: 10px;
  font-weight: 700;
  cursor: pointer;
}

.btn.primary {
  background: var(--blue);
  color: white;
}

/* ===== Footer ===== */
.footer {
  margin-left: 260px;
  padding: 18px;
  color: var(--muted);
}

/* Responsive */
@media(max-width:900px){
  .sidebar {
    width: 70px;
  }

  .main {
    margin-left: 90px;
    width: calc(100% - 90px);
  }

  .menu a {
    font-size: 0.7rem;
    padding: 6px;
  }

  .hero-img { display:none; }
}

/* === FLOATING BACK BUTTON === */
.floating-back {
  position: fixed;
  top: 20px;
  left: 280px; /* menyesuaikan sidebar */
  z-index: 9999;

  width: 48px;
  height: 48px;
  border-radius: 50%;
  border: none;

  background: var(--blue);
  color: #fff;

  display: flex;
  align-items: center;
  justify-content: center;

  font-size: 1.4rem;
  font-weight: bold;
  cursor: pointer;

  box-shadow: 0 6px 20px rgba(10,118,214,0.25);
  transition: all .25s ease;
}

/* Hover effect */
.floating-back:hover {
  background: var(--blue-2);
  transform: translateX(-4px) scale(1.08);
  box-shadow: 0 10px 26px rgba(10,118,214,0.35);
}

/* Dark mode */
body.dark .floating-back {
  background: #0d4a8c;
  box-shadow: 0 6px 20px rgba(0,0,0,0.45);
}
body.dark .floating-back:hover {
  background: #0c5bb4;
}

/* RESPONSIVE (tablet & HP) */
@media (max-width: 900px) {
  .floating-back {
    left: 84px; /* Sidebar kecil */
  }
}

/* ============================================================
   MOBILE RESPONSIVE (max-width: 768px)
   ============================================================ */
   @media (max-width: 768px) {

    /* Layout dasar */
    .sidebar {
      width: 70px;
      padding: 15px 10px;
    }
  
    .sidebar h2.logo {
      font-size: 16px;
      text-align: center;
      padding: 0;
    }
  
    /* Tombol dark mode */
    #themeToggle {
      width: 40px;
      height: 40px;
      font-size: 18px;
    }
  
    /* Sidebar menu icons only */
    .menu a {
      font-size: 14px;
      padding: 10px 0;
      text-align: center;
    }
  
    .menu a::after {
      display: none;
    }
  
    /* Main area */
    .main {
      margin-left: 70px;
      padding: 15px;
    }
  
    /* Hero section */
    .hero {
      flex-direction: column;
      text-align: center;
      gap: 10px;
    }
  
    .hero-img {
      width: 90%;
      max-width: 220px;
    }
  
    .hero-text h1 {
      font-size: 20px;
    }
  
    .menu-grid {
      grid-template-columns: 1fr;
      gap: 15px;
    }
  
    /* Panel layout */
    .panel {
      padding: 15px;
    }
  
    .section-title {
      font-size: 20px;
    }
  
    /* Back button floating */
    .backBtn {
      position: fixed;
      top: 12px;
      right: 12px;
      padding: 10px 14px;
      border-radius: 50px;
      font-size: 14px;
      z-index: 9999;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }
  
    /* Kosakata Posisi */
    .pos-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 8px;
    }
  
    #posInfoBox {
      width: 100%;
      max-width: 380px;
      left: 50%;
      transform: translateX(-50%);
      padding: 15px;
    }
  
    .pos-card {
      transform: scale(0.9);
    }
  
    /* Flashcard bagian */
    .flash-wrapper {
      padding: 10px 0;
    }
  
    /* Flashcard 3D size */
    .card-3d {
      width: 90%;
      height: 280px;
    }
  
    .flash-img {
      width: 100%;
      height: 150px;
      object-fit: contain;
    }
  
    .flash-controls {
      flex-wrap: wrap;
      gap: 8px;
    }
  
    .flash-controls .btn {
      width: 48%;
      padding: 8px;
      font-size: 14px;
    }
  
    .progress-line {
      margin-top: 10px;
    }
  
    /* Backside (hologram) adjust for mobile readability */
    .romaji {
      font-size: 18px;
    }
  
    .meaning {
      font-size: 22px;
    }
  
    .desc {
      font-size: 14px;
      padding: 0 10px;
    }
  
    /* Game placeholder */
    #game .card-block {
      font-size: 14px;
    }
  }
  
/* ----------------------------
   DEFAULT VARIABLES
----------------------------- */
:root {
  --nav-bg: #ffffff;
  --nav-text: #2c2c2c;
  --accent: #0a6bdc;
}

/* DARK MODE */
.dark {
  --nav-bg: #121212;
  --nav-text: #ffffff;
}

/* ===============================
   BOTTOM NAVBAR — MOBILE ONLY (DEFAULT)
   =============================== */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 65px;
  background: var(--nav-bg);
  border-top: 2px solid rgba(0,0,0,0.15);
  display: flex;
  justify-content: space-around;
  align-items: center;
  z-index: 9999;
}

.nav-btn {
  background: none;
  border: none;
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  color: var(--nav-text);
  cursor: pointer;
  transition: 0.25s;
}

.nav-btn .icon {
  font-size: 1.35rem;
}

.nav-btn.active {
  color: var(--accent);
  transform: translateY(-4px);
}

/* Prevent overlap */
main {
  padding-bottom: 80px;
}

/* ===============================
   DESKTOP MODE (≥ 900px)
   → BOTTOM NAVBAR DISABLED
   =============================== */
@media (min-width: 900px) {

  /* Hide bottom navbar completely */
  .bottom-nav {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
  }

  /* Sidebar kembali seperti biasa */
  .sidebar {
    display: block !important;
  }

  .main {
    margin-left: 260px !important;
    width: calc(100% - 260px) !important;
  }

  footer {
    margin-left: 260px !important;
  }
}

/* ===============================
   MOBILE MODE (< 900px)
   → SIDEBAR HILANG
   → NAVBAR TETAP BOTTOM
   =============================== */
@media (max-width: 900px) {

  /* Fully hide sidebar */
  .sidebar {
    display: none !important;
    width: 0 !important;
    min-width: 0 !important;
    opacity: 0 !important;
    visibility: hidden !important;
  }

  /* Bottom nav show */
  .bottom-nav {
    display: flex !important;
  }

  .main {
    margin-left: 0 !important;
    width: 100% !important;
    padding-bottom: 80px;
  }

  footer {
    margin-left: 0 !important;
  }
}

/* ===== Kanji Wolf styles ===== */
.wolf-game { max-width:920px; margin:12px auto 40px; padding:12px; }
.game-header { display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:8px; }
.game-title { font-weight:800; color:var(--blue-2); font-size:1.05rem; }
.game-stats { color:var(--muted); font-weight:700; display:flex; gap:12px; align-items:center; }
.game-instr { color:var(--muted); margin-bottom:12px; max-width:900px; }

/* npc list */
.npc-list { display:flex; gap:18px; flex-wrap:wrap; justify-content:center; align-items:flex-end; padding:8px; }
.npc { width:120px; min-height:140px; background:var(--card); border-radius:12px; border:1px solid #e6f6ff; display:flex; flex-direction:column; align-items:center; padding:8px; cursor:pointer; transition: transform .18s ease, box-shadow .18s ease; box-shadow: 0 8px 20px rgba(10,30,70,0.04); }
.npc:focus { outline:3px solid rgba(10,110,220,0.14); }
.npc:hover { transform: translateY(-6px); box-shadow:0 18px 40px rgba(10,30,70,0.06); }

/* avatar + bubble */
.npc .avatar { font-size:36px; margin-top:6px; }
.npc .bubble { margin-top:10px; background:linear-gradient(180deg,#ffffff,#f2f8ff); border-radius:12px; padding:8px 10px; font-weight:700; color:var(--blue-2); text-align:center; min-height:40px; display:flex; align-items:center; justify-content:center; }

/* wrong / success states */
.npc.correct { opacity:0.95; }
.npc.wrong { animation:shake .45s; border-color:#ffbbbb; box-shadow: 0 8px 24px rgba(220,0,0,0.08); }
.npc.success { animation:pop .35s; box-shadow:0 18px 46px rgba(30,160,80,0.12); border-color:#60c37a; }

@keyframes shake {
  0%{ transform:translateX(0) }
  20%{ transform:translateX(-8px) }
  40%{ transform:translateX(6px) }
  60%{ transform:translateX(-4px) }
  80%{ transform:translateX(2px) }
  100%{ transform:translateX(0) }
}
@keyframes pop {
  0%{ transform:scale(.9) }
  60%{ transform:scale(1.06) }
  100%{ transform:scale(1) }
}

/* small meta + message */
.game-controls { display:flex; gap:12px; align-items:center; justify-content:center; margin-top:14px; }
.kw-msg { color:var(--muted); font-weight:700; margin-left:8px; }

/* overlay */
.kw-overlay { position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(3,10,25,0.55); z-index:99999; }
.kw-overlay-card { background:var(--card); padding:18px; border-radius:12px; text-align:center; width:320px; box-shadow:0 18px 50px rgba(0,0,0,0.35); }
.kw-overlay.hidden { display:none; }

/* responsive adjustments */
@media (max-width:700px) {
  .npc { width:46%; min-height:120px; }
  .npc .avatar { font-size:28px; }
  .npc .bubble { font-size:0.95rem; min-height:44px; }
  .wolf-game { padding:8px; }
}

/* FIX: HIDE ANYTHING WITH .hidden */
.hidden {
  display: none !important;
}

/* ===== DARK MODE FLOATING BUTTON (Mobile) ===== */
@media (max-width: 900px) {
  #themeToggle {
    position: fixed;
    bottom: 90px; 
    right: 20px;
    z-index: 99999;

    width: 55px;
    height: 55px;
    border-radius: 50%;
    font-size: 22px;
    background: var(--blue);
    color: white;
    display: flex !important;
    align-items: center;
    justify-content: center;

    box-shadow: 0 6px 20px rgba(0,0,0,0.3);
  }

  /* Pastikan tombol tetap muncul meskipun sidebar disembunyikan */
  .sidebar #themeToggle {
    display: none !important;
  }
}

/* Tombol dark mode mobile */
.theme-mobile {
  display: none;
}

@media (max-width: 900px) {
  .theme-mobile {
    display: flex;
    position: fixed;
    bottom: 90px;
    right: 20px;
    width: 55px;
    height: 55px;
    background: #2d6cdf;
    color: #fff;
    border-radius: 50%;
    font-size: 24px;
    justify-content: center;
    align-items: center;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    z-index: 99999;
    border: none;
    cursor: pointer;
  }
}

